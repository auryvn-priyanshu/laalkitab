<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Divya-Vani | Param-Astro AI</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Marcellus&family=Cinzel:wght@400;700&family=Noto+Serif+Devanagari:wght@400;700&display=swap');

        :root {
            --ganesha-red: #8B0000;
            --surya-gold: #FFD700;
            --shiva-ash: #E5E7EB;
            --vedic-saffron: #FF9933;
            --divine-purple: #4B0082;
            --parchment: #FDF5E6;
            --text-dark: #2C1810;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }

        body {
            font-family: 'Marcellus', serif;
            background: radial-gradient(circle at center, #3d0a0a 0%, #1a0505 100%);
            color: var(--parchment);
            min-height: 100vh;
            line-height: 1.6;
        }

        /* Mythological Background Patterns */
        body::before {
            content: "";
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background-image: url('https://www.transparenttextures.com/patterns/paper-fibers.png');
            opacity: 0.2;
            pointer-events: none;
            z-index: -1;
        }

        .om-symbol {
            font-family: 'Noto Serif Devanagari', serif;
            font-size: 5rem;
            color: var(--vedic-saffron);
            text-shadow: 0 0 20px var(--surya-gold);
            margin-bottom: 1rem;
            display: block;
        }

        header {
            padding: 4rem 1rem;
            text-align: center;
            border-bottom: 2px solid var(--surya-gold);
            background: linear-gradient(to bottom, rgba(139, 0, 0, 0.4), transparent);
        }

        .sanskrit-title {
            font-family: 'Noto Serif Devanagari', serif;
            font-size: 1.8rem;
            color: var(--surya-gold);
            letter-spacing: 5px;
        }

        .main-title {
            font-family: 'Cinzel', serif;
            font-size: 3.5rem;
            text-transform: uppercase;
            letter-spacing: 8px;
            margin: 0.5rem 0;
            background: linear-gradient(to bottom, #fff, var(--surya-gold));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        main { max-width: 1100px; margin: 0 auto; padding: 2rem; }

        .divine-card {
            background: rgba(44, 24, 16, 0.85);
            border: 2px solid var(--surya-gold);
            border-radius: 4px;
            padding: 2.5rem;
            box-shadow: 0 0 30px rgba(0,0,0,0.5);
            position: relative;
            overflow: hidden;
        }

        .divine-card::after {
            content: "";
            position: absolute;
            bottom: -50px; right: -50px;
            width: 200px; height: 200px;
            background: radial-gradient(circle, var(--surya-gold) 0%, transparent 70%);
            opacity: 0.05;
            pointer-events: none;
        }

        .input-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .input-box {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        label {
            font-family: 'Cinzel', serif;
            color: var(--vedic-saffron);
            font-size: 0.9rem;
            font-weight: bold;
        }

        input {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--vedic-saffron);
            padding: 1rem;
            color: white;
            font-family: inherit;
            border-radius: 4px;
        }

        .btn-ritual {
            width: 100%;
            padding: 1.5rem;
            background: var(--ganesha-red);
            border: 2px solid var(--surya-gold);
            color: var(--surya-gold);
            font-family: 'Cinzel', serif;
            font-size: 1.3rem;
            font-weight: bold;
            cursor: pointer;
            transition: 0.3s;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .btn-ritual:hover {
            background: var(--vedic-saffron);
            color: var(--text-dark);
            box-shadow: 0 0 20px var(--vedic-saffron);
        }

        /* Results UI */
        #results { display: none; margin-top: 3rem; }

        .bhava-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            margin: 2rem 0;
        }

        .bhava-box {
            aspect-ratio: 1;
            border: 1px solid var(--surya-gold);
            background: rgba(0,0,0,0.3);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            position: relative;
            transition: 0.3s;
        }

        .bhava-box:hover { background: rgba(255, 215, 0, 0.1); }

        .bhava-num { position: absolute; top: 5px; left: 5px; font-size: 0.7rem; opacity: 0.5; }
        .bhava-title { font-size: 0.6rem; color: var(--vedic-saffron); margin-bottom: 5px; }

        .insight-section {
            margin-top: 4rem;
        }

        .insight-header {
            border-bottom: 2px solid var(--vedic-saffron);
            margin-bottom: 2rem;
            padding-bottom: 0.5rem;
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .insight-header h2 { font-family: 'Cinzel', serif; color: var(--surya-gold); font-size: 2rem; }

        .long-analysis {
            background: rgba(255, 255, 255, 0.03);
            padding: 2rem;
            border-radius: 8px;
            margin-bottom: 2rem;
            border-left: 4px solid var(--vedic-saffron);
        }

        .analysis-para {
            margin-bottom: 1.5rem;
            font-size: 1.05rem;
            color: #d1d1d1;
            text-align: justify;
        }

        .analysis-para b { color: var(--surya-gold); }

        .remedy-item {
            background: rgba(139, 0, 0, 0.2);
            padding: 1.5rem;
            border: 1px dashed var(--surya-gold);
            margin-bottom: 1rem;
            display: flex;
            gap: 1rem;
            align-items: flex-start;
        }

        .remedy-icon { font-size: 1.5rem; color: var(--surya-gold); }

        #loader {
            display: none;
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(0,0,0,0.9);
            z-index: 1000;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .mandala {
            width: 150px;
            height: 150px;
            animation: rotate 10s linear infinite;
        }

        @keyframes rotate { 100% { transform: rotate(360deg); } }

        /* Responsive */
        @media (max-width: 768px) {
            .bhava-grid { grid-template-columns: repeat(3, 1fr); }
            .main-title { font-size: 2rem; }
        }
    </style>
</head>
<body>

    <div id="loader">
        <svg class="mandala" viewBox="0 0 100 100">
            <circle cx="50" cy="50" r="45" fill="none" stroke="#FFD700" stroke-width="0.5"/>
            <path d="M50 5 L55 45 L95 50 L55 55 L50 95 L45 55 L5 50 L45 45 Z" fill="#FF9933"/>
            <circle cx="50" cy="50" r="10" fill="#8B0000"/>
        </svg>
        <p style="margin-top: 2rem; color: var(--surya-gold); font-family: 'Cinzel', serif; letter-spacing: 3px;">Consulting Akashic Records...</p>
    </div>

    <header>
        <span class="om-symbol">ॐ</span>
        <div class="sanskrit-title">लाल किताब अमृत ज्ञानम्</div>
        <h1 class="main-title">Divya Vani AI</h1>
        <p style="letter-spacing: 4px; opacity: 0.8;">Vedic Mythology & High-Precision Destiny Analysis</p>
    </header>

    <main>
        <section class="divine-card">
            <div class="input-grid">
                <div class="input-box">
                    <label>Janma Dina (Birth Date)</label>
                    <input type="date" id="dob">
                </div>
                <div class="input-box">
                    <label>Janma Samaya (Birth Time)</label>
                    <input type="time" id="tob">
                </div>
                <div class="input-box">
                    <label>Janma Sthana (Location)</label>
                    <input type="text" id="pob" placeholder="Coordinates or City">
                </div>
            </div>
            <button class="btn-ritual" onclick="performRitual()">Awaken Insights</button>
        </section>

        <section id="results">
            <div class="insight-section">
                <div class="insight-header">
                    <i class="fa-solid fa-dharmachakra"></i>
                    <h2>Bhavacakra (House Analysis)</h2>
                </div>
                <div class="bhava-grid" id="bhavaGrid"></div>
            </div>

            <div id="analysisContent"></div>

            <div class="insight-section">
                <div class="insight-header">
                    <i class="fa-solid fa-hands-praying"></i>
                    <h2>Upaya (Mitigation Rituals)</h2>
                </div>
                <div id="remedyContainer"></div>
            </div>
        </section>
    </main>

    <script>
        // --- High Precision Vedic Engine ---
        const SANSKRIT_PLANETS = {
            'Sun': { name: 'Surya', icon: 'fa-sun', color: '#FFD700', deity: 'Lord Vishnu' },
            'Moon': { name: 'Chandra', icon: 'fa-moon', color: '#E5E7EB', deity: 'Lord Shiva' },
            'Mars': { name: 'Mangala', icon: 'fa-fire', color: '#FF4500', deity: 'Lord Hanuman' },
            'Mercury': { name: 'Budha', icon: 'fa-comment', color: '#32CD32', deity: 'Lord Ganesha' },
            'Jupiter': { name: 'Guru', icon: 'fa-graduation-cap', color: '#FFD700', deity: 'Lord Brahma' },
            'Venus': { name: 'Shukra', icon: 'fa-heart', color: '#FFB6C1', deity: 'Goddess Lakshmi' },
            'Saturn': { name: 'Shani', icon: 'fa-gear', color: '#4B0082', deity: 'Lord Yama' },
            'Rahu': { name: 'Rahu', icon: 'fa-mask', color: '#2F4F4F', deity: 'Goddess Durga' },
            'Ketu': { name: 'Ketu', icon: 'fa-bolt', color: '#708090', deity: 'Lord Ganesha' }
        };

        const BHAVA_TITLES = [
            "Tanu (Self)", "Dhana (Wealth)", "Sahaja (Siblings)", "Bandhu (Home)",
            "Putra (Intellect)", "Ari (Debt/Disease)", "Yuvati (Partner)", "Randhra (Transformation)",
            "Dharma (Fortune)", "Karma (Profession)", "Labha (Gains)", "Vyaya (Loss/Moksha)"
        ];

        // Ayanamsha Correction (approximate Lahiri)
        const AYANAMSHA = 24.1; 

        function getJD(date, time) {
            const [y, m, d] = date.split('-').map(Number);
            const [hh, mm] = time.split(':').map(Number);
            return 367 * y - Math.floor(7 * (y + Math.floor((m + 9) / 12)) / 4) + Math.floor(275 * m / 9) + d + 1721013.5 + (hh + mm/60)/24;
        }

        function calculatePlanets(jd) {
            const d = jd - 2451545.0;
            const calc = (base, speed) => ((base + speed * d - AYANAMSHA) % 360 + 360) % 360;
            
            return {
                'Sun': calc(280.46, 0.985647),
                'Moon': calc(218.32, 13.17639),
                'Mars': calc(355.45, 0.52402),
                'Mercury': calc(252.25, 4.0923),
                'Jupiter': calc(34.4, 0.083),
                'Venus': calc(181.98, 1.6021),
                'Saturn': calc(49.94, 0.033),
                'Rahu': calc(125.12, -0.0529),
                'Ketu': (calc(125.12, -0.0529) + 180) % 360
            };
        }

        function performRitual() {
            const dob = document.getElementById('dob').value;
            const tob = document.getElementById('tob').value;
            if(!dob || !tob) return;

            document.getElementById('loader').style.display = 'flex';

            setTimeout(() => {
                const jd = getJD(dob, tob);
                const positions = calculatePlanets(jd);
                const houses = mapToHouses(positions);
                renderResults(houses, positions);
                
                document.getElementById('loader').style.display = 'none';
                document.getElementById('results').style.display = 'block';
            }, 2500);
        }

        function mapToHouses(positions) {
            const map = Array.from({length: 12}, (_, i) => ({ 
                id: i+1, 
                title: BHAVA_TITLES[i], 
                planets: [] 
            }));
            for(const [p, deg] of Object.entries(positions)) {
                const hIdx = Math.floor(deg / 30);
                map[hIdx].planets.push(p);
            }
            return map;
        }

        function renderResults(houses, positions) {
            // Bhava Grid
            const grid = document.getElementById('bhavaGrid');
            grid.innerHTML = '';
            houses.forEach(h => {
                grid.innerHTML += `
                    <div class="bhava-box">
                        <span class="bhava-num">${h.id}</span>
                        <span class="bhava-title">${h.title}</span>
                        <div>${h.planets.map(p => `<i class="fa-solid ${SANSKRIT_PLANETS[p].icon}" style="color:${SANSKRIT_PLANETS[p].color}; margin: 2px;"></i>`).join('')}</div>
                    </div>
                `;
            });

            // Comprehensive Analysis
            const content = document.getElementById('analysisContent');
            content.innerHTML = '';
            
            const sectors = [
                { id: 'Atma', title: 'Atma & Personality (House 1)', h: 1, icon: 'fa-user-ninja' },
                { id: 'Artha', title: 'Artha & Material Wealth (House 2 & 11)', h: 2, icon: 'fa-vault' },
                { id: 'Karma', title: 'Karma & Career (House 10)', h: 10, icon: 'fa-briefcase' },
                { id: 'Moksha', title: 'Spiritual Path (House 12)', h: 12, icon: 'fa-lotus' }
            ];

            sectors.forEach(s => {
                const hData = houses.find(x => x.id === s.h);
                const planets = hData.planets;
                let text = generateLongAnalysis(s.id, planets);
                
                content.innerHTML += `
                    <div class="insight-section">
                        <div class="insight-header">
                            <i class="fa-solid ${s.icon}"></i>
                            <h2>${s.title}</h2>
                        </div>
                        <div class="long-analysis">${text}</div>
                    </div>
                `;
            });

            // Remedies
            const remContainer = document.getElementById('remedyContainer');
            remContainer.innerHTML = '';
            const allPlanets = Object.keys(positions);
            allPlanets.forEach(p => {
                const hNum = houses.find(h => h.planets.includes(p)).id;
                const remedy = getDeepRemedy(p, hNum);
                if(remedy) {
                    remContainer.innerHTML += `
                        <div class="remedy-item">
                            <div class="remedy-icon"><i class="fa-solid ${SANSKRIT_PLANETS[p].icon}"></i></div>
                            <div>
                                <strong style="color:var(--vedic-saffron)">Ritual for ${SANSKRIT_PLANETS[p].name} (${p})</strong>
                                <p style="font-size:0.9rem; margin-top:5px;">${remedy}</p>
                            </div>
                        </div>
                    `;
                }
            });
        }

        function generateLongAnalysis(sector, planets) {
            if(planets.length === 0) {
                return `<p class="analysis-para">The celestial energies in this house are subtle. <b>Lord Brahma</b> suggests that this area of your life relies heavily on your "Purushartha" or personal effort rather than inherited destiny. Without a specific planetary lord sitting here, you have the rare freedom to write your own script in this sector.</p>`;
            }

            let analysis = "";
            planets.forEach(p => {
                const meta = SANSKRIT_PLANETS[p];
                if(sector === 'Atma') {
                    analysis += `<p class="analysis-para"><b>${meta.name} (${p})</b> presence in your first house creates a dynamic where ${meta.deity} oversees your physical manifestation. This is a powerful "Lal Kitab" placement. You likely possess a magnetic aura that attracts either deep respect or intense jealousy. The alignment of ${p} suggests that your soul's primary mission in this incarnation is the mastery of ego and self-expression. You must be careful not to let the intense heat of this planet burn your personal relationships.</p>`;
                } else if(sector === 'Artha') {
                    analysis += `<p class="analysis-para">The configuration of <b>${meta.name}</b> in your House of Assets indicates a karmic link to the material world overseen by ${meta.deity}. Prosperity for you is not merely a matter of hard work but of planetary alignment. You may experience sudden windfalls when Jupiter aspects this position. However, ensure that you do not indulge in "Adharma" (unethical gains), as this specific placement of ${p} can cause a rapid reversal of fortunes if integrity is compromised.</p>`;
                } else if(sector === 'Karma') {
                    analysis += `<p class="analysis-para">Your professional life is significantly influenced by <b>${meta.name}</b>. In the 10th house, this is the seat of power. Mythologically, this represents your "Sva-Dharma". You are destined to lead or manage large projects. If Saturn aspects this planet, expect delays until age 36, after which a massive surge in status is predicted. You must avoid workplace politics, as your ${p} placement makes you vulnerable to "Gupta Shatru" (hidden enemies) who fear your rapid ascent.</p>`;
                } else {
                    analysis += `<p class="analysis-para">The 12th house placement of <b>${meta.name}</b> acts as a gateway to the subconscious. This is a classic "Moksha" indicator. While it may cause foreign travels or expenditures, its deeper meaning is spiritual liberation. You are being guided by ${meta.deity} to look beyond the material veil. Dreams and intuition are your strongest tools. If you ignore your spiritual calling, the ${p} energy may manifest as insomnia or unexplainable anxieties.</p>`;
                }
            });

            analysis += `<p class="analysis-para"><i>Vedic Insight:</i> The confluence of these energies suggests a transformative period every 9 years when the nodes (Rahu/Ketu) return to their natal positions. During these times, meditation and charity are mandatory to balance the cosmic vibrations.</p>`;
            
            return analysis;
        }

        function getDeepRemedy(p, h) {
            const remedies = {
                'Sun': "Offer 'Arghya' (water) to the Sun at dawn using a copper vessel. Recite the Aditya Hridaya Stotra. Avoid eating salt on Sundays to strengthen your resolve.",
                'Moon': "Keep a silver coin or a solid silver brick in your locker. Offer milk to a Shiva Lingam on Mondays. Avoid staying near large water bodies during New Moon nights.",
                'Mars': "Recite the Hanuman Chalisa 7 times every Tuesday. Feed sweetened rotis to red dogs. Wear a small piece of copper around your neck to stabilize fluctuating temper.",
                'Mercury': "Donate green gram (Moong Dal) to a temple on Wednesdays. Feed green fodder to cows. Keep your workstation clutter-free to avoid 'Budh' affliction.",
                'Jupiter': "Apply a 'Tilak' of Kesar (Saffron) on your forehead daily. Respect your elders and teachers. Donate yellow clothes or chana dal on Thursdays.",
                'Venus': "Keep your living space fragrant with sandalwood or rose. Respect your spouse and women in general. Donate white sweets to little girls on Fridays.",
                'Saturn': "Light a mustard oil lamp under a Peepal tree on Saturday evenings. Help the blind or physically challenged. Avoid buying leather or iron on Saturdays.",
                'Rahu': "Keep a small solid silver ball in your pocket at all times. Avoid wearing blue or black clothing near the head. Donate blankets to the needy during winters.",
                'Ketu': "Feed multi-colored dogs. Donate black and white blankets to a religious place. Wear a gold chain or thread around your neck for divine protection."
            };
            return remedies[p] || "Practice daily silence (Mauna) for 15 minutes to center your energy.";
        }
    </script>
</body>
</html>
